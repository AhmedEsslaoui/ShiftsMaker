!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="458dd9cc-4e03-49c8-b5f8-1ec601984b37",e._sentryDebugIdIdentifier="sentry-dbid-458dd9cc-4e03-49c8-b5f8-1ec601984b37")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3972:(e,t,a)=>{Promise.resolve().then(a.bind(a,8078)),Promise.resolve().then(a.t.bind(a,5901,23))},8078:(e,t,a)=>{"use strict";a.d(t,{default:()=>eU});var s=a(5155),r=a(2115),l=a(4188),n=a(3918),i=a(1254),d=a(4597),o=a(8198),c=a(722);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,o.$)(t))}let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:n=!1,...d}=e,o=n?i.DX:"button";return(0,s.jsx)(o,{className:u(m({variant:r,size:l,className:a})),ref:t,...d})});h.displayName="Button";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",a),...r})});f.displayName="Card";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...r})});x.displayName="CardHeader";let y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("font-semibold leading-none tracking-tight",a),...r})});y.displayName="CardTitle";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",a),...r})});p.displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("p-6 pt-0",a),...r})});g.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var b=a(1790);let j=b.bL,v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.B8,{ref:t,className:u("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...r})});v.displayName=b.B8.displayName;let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.l9,{ref:t,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...r})});w.displayName=b.l9.displayName;let N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.UC,{ref:t,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});N.displayName=b.UC.displayName;let M=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});M.displayName="Input";var S=a(5794);let k=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(S.b,{ref:t,className:u(k(),a),...r})});A.displayName=S.b.displayName;var C=a(1851),T=a(7808),E=a(5753),D=a(394);let I=C.bL;C.YJ;let R=C.WT,F=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(C.l9,{ref:t,className:u("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(C.In,{asChild:!0,children:(0,s.jsx)(T.A,{className:"h-4 w-4 opacity-50"})})]})});F.displayName=C.l9.displayName;let z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.PP,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(E.A,{className:"h-4 w-4"})})});z.displayName=C.PP.displayName;let L=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.wn,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})});L.displayName=C.wn.displayName;let H=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(C.ZL,{children:(0,s.jsxs)(C.UC,{ref:t,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(z,{}),(0,s.jsx)(C.LM,{className:u("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(L,{})]})})});H.displayName=C.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.JU,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=C.JU.displayName;let B=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(C.q7,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(C.VF,{children:(0,s.jsx)(D.A,{className:"h-4 w-4"})})}),(0,s.jsx)(C.p4,{children:r})]})});B.displayName=C.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.wv,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=C.wv.displayName;var O=a(9466);let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.bL,{className:u("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(O.zi,{className:u("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});P.displayName=O.bL.displayName;var V=a(3609),J=a(6116),U=a(8251),_=a(835),G=a(8851),W=a(9795),Y=a(3284),Z=a(7693),q=a(594),K=a(3452),Q=a(5184),X=a(8119);let $=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:u("w-full caption-bottom text-sm",a),...r})})});$.displayName="Table";let ee=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:u("[&_tr]:border-b",a),...r})});ee.displayName="TableHeader";let et=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:u("[&_tr:last-child]:border-0",a),...r})});et.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:u("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let ea=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:u("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});ea.displayName="TableRow";let es=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:u("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});es.displayName="TableHead";let er=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:u("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});er.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:u("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var el=a(3678),en=a(5330);let ei=el.bL,ed=el.l9,eo=el.ZL;el.bm;let ec=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(el.hJ,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});ec.displayName=el.hJ.displayName;let eu=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(eo,{children:[(0,s.jsx)(ec,{}),(0,s.jsxs)(el.UC,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(el.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(en.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eu.displayName=el.UC.displayName;let em=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:u("flex flex-col space-y-1.5 text-center sm:text-left",t),...a,"data-sentry-component":"DialogHeader","data-sentry-source-file":"dialog.tsx"})};em.displayName="DialogHeader";let eh=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a,"data-sentry-component":"DialogFooter","data-sentry-source-file":"dialog.tsx"})};eh.displayName="DialogFooter";let ef=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(el.hE,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",a),...r})});ef.displayName=el.hE.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(el.VY,{ref:t,className:u("text-sm text-muted-foreground",a),...r})});ex.displayName=el.VY.displayName;let ey=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ep(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:u(ey({variant:a}),t),...r,"data-sentry-component":"Badge","data-sentry-source-file":"badge.tsx"})}var eg=a(9606),eb=a(381),ej=a(5443);let ev=(0,eb.Wp)({apiKey:"AIzaSyCkZ4bkcG0_3zc2H5WYelYyMgBWxcwVM74",authDomain:"shiftsmaker.firebaseapp.com",projectId:"shiftsmaker",storageBucket:"shiftsmaker.firebasestorage.app",messagingSenderId:"53828147940",appId:"1:53828147940:web:5e15d67b613567b1dfaaf1",measurementId:"G-QF8D8ZX77M"}),ew=(0,ej._A)(ev,{cacheSizeBytes:ej.H6});(0,ej.ol)(ew).catch(e=>{"failed-precondition"===e.code?console.log("Persistence failed: Multiple tabs open"):"unimplemented"===e.code&&console.log("Persistence not supported by browser")});let eN="shifts",eM="shiftTables",eS="agents",ek="agentsList";async function eA(e,t,a){try{let s=(0,ej.H9)(ew,t,a);await (0,ej.c4)(ew,async a=>{let r=await a.get(s);if(r.exists()){let l=r.data();if(t===eN){let t=new Map((l.tables||[]).map(e=>[e.id,e]));new Map((e.tables||[]).map(e=>[e.id,e])).forEach((e,a)=>{t.set(a,e)}),a.set(s,{tables:Array.from(t.values()),lastModified:(0,ej.O5)()})}else{let t=function(e,t){if(!e.tables||!t.tables)return t;e.tables.map(e=>[e.id,e]);let a=new Map(t.tables.map(e=>[e.id,e]));return{...t,tables:Array.from(a.values())}}(l,e);a.set(s,{...t,lastModified:(0,ej.O5)()})}}else a.set(s,{...e,lastModified:(0,ej.O5)()})}),console.log("✅ Data saved successfully to Firestore")}catch(e){throw console.error("Error saving to Firestore:",e),e}}async function eC(e,t){try{let a=(0,ej.H9)(ew,e,t),s=await (0,ej.x7)(a);if(!s.exists())return console.log("No such document exists!"),null;{let{lastModified:e,...t}=s.data();return t}}catch(e){throw console.error("Error loading from Firestore:",e),e}}async function eT(e){try{await eA({agents:e},eS,ek),console.log("✅ Agents saved successfully to Firestore")}catch(e){throw console.error("Error saving agents:",e),e}}async function eE(){try{let e=await eC(eS,ek);return(null==e?void 0:e.agents)||{Egypt:[],Morocco:[]}}catch(e){return console.error("Error loading agents:",e),{Egypt:[],Morocco:[]}}}async function eD(e){try{await eA({tables:e},eN,eM),console.log("✅ Shift tables saved successfully to Firestore")}catch(e){throw console.error("Error saving shift tables:",e),e}}async function eI(){try{let e=await eC(eN,eM);return(null==e?void 0:e.tables.filter(e=>!e.isDeleted))||[]}catch(e){throw console.error("Error loading shift tables:",e),e}}let eR={Morning:{timeRange:"08:00 to 16:00",timeSlots:["08:00-09:00","09:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00"],theme:"from-yellow-50 to-yellow-100 hover:to-yellow-200"},Day:{timeRange:"16:00 to 00:00",timeSlots:["16:00-17:00","17:00-18:00","18:00-19:00","19:00-20:00","20:00-21:00","21:00-22:00","22:00-23:00","23:00-00:00"],theme:"from-blue-50 to-blue-100 hover:to-blue-200"},Afternoon:{timeRange:"10:00 to 18:00",timeSlots:["10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00","17:00-18:00"],theme:"from-orange-50 to-orange-100 hover:to-orange-200"},Evening:{timeRange:"18:00 to 02:00",timeSlots:["18:00-19:00","19:00-20:00","20:00-21:00","21:00-22:00","22:00-23:00","23:00-00:00","00:00-01:00","01:00-02:00"],theme:"from-purple-50 to-purple-100 hover:to-purple-200"},Night:{timeRange:"00:00 to 08:00",timeSlots:["00:00-01:00","01:00-02:00","02:00-03:00","03:00-04:00","04:00-05:00","05:00-06:00","06:00-07:00","07:00-08:00"],theme:"from-indigo-50 to-indigo-100 hover:to-indigo-200"}},eF={Morning:0,Afternoon:1,Day:2,Evening:3,Night:4},ez={Egypt:["Chat","Appeals/Reviews","Appeals/Reviews/Calls","Calls","Calls /App follow","Emails","Appeals/Reviews/Calls/App follow","App follow","Break","Sick"],Morocco:["Chat","Chat/Appeals+Reviews","Chat /Emails+Groups+ Calls","Emails ( New ) + Appeals+ Calls","Emails (Need attention) + Reviews + Groups","All tasks + Calls","Break","Sick"]},eL={Chat:"from-emerald-200 to-teal-200","Appeals/Reviews":"from-blue-200 to-cyan-200","Appeals/Reviews/Calls":"from-indigo-200 to-blue-200",Calls:"from-violet-200 to-purple-200","Calls /App follow":"from-purple-200 to-pink-200",Emails:"from-amber-200 to-yellow-200","Appeals/Reviews/Calls/App follow":"from-rose-200 to-pink-200","App follow":"from-sky-200 to-blue-200","Chat/Appeals+Reviews":"from-blue-200 to-cyan-200","Chat /Emails+Groups+ Calls":"from-blue-200 to-cyan-200","Emails ( New ) + Appeals+ Calls":"from-amber-200 to-yellow-200","Emails (Need attention) + Reviews + Groups":"from-violet-200 to-purple-200","All tasks + Calls":"from-rose-200 to-pink-200",Break:"from-gray-200 to-slate-200",Sick:"from-red-200 to-rose-200"},eH={Egypt:["Eman Anwer","Noura Emam","Mai Tarek Kamell Hessen","Abdelhamid Khamis","Ahmad Gamal Anwer","Ahmad Sobhy","Ahmed Moustafa","Omnia Ahmed","Mohammed Hamdy","Ahmed Mohamed Ahmed","Abdulrahman Sayed Gomaa Mohamed","Ibrahim Zaki","Amira Tarek Taher Megahed","Esraa Osama","Sara Mourad Wahba Mikhael","Mahmoud Aataf","Rawan AbdElbast","Abdelaziz","Mohamed Ali","Moaz Yousef","Eslam Nasser","Asmaa Gamal Kamel","Yasmine Tarek","Asmaa Mohamed Zawam","Nouran Ramdan","Eman Mohsen","Mohamed Osama","Eslam Mohammed El Sayed Awad","Shreif Abdrabo","Michael Magdy","Mohamedd Essam","Sara Abdelrazek","Ahmed Osama","Hesham Adawy","Sameh Adel Farah Ahmed","Mohamed Mostafa Isawi Ali","Mayan","Amr Nady","Abdulhamid Mostafa","Fatima","Youmna Yousef","Heba Raafat","Mahmoud Gamil abdelaziz","Kareem abubakr","Alaa Elsayed","Rahma Hassan Abdelrahman","Ahmed Shaaban"],Morocco:["Yasser Marrou","Mariem Abdelhakmi","Zaynab Adil","Meryem Mazroui","Mohammad Aznague","Achraf Tazi","Mohamed Elhachmi","Mohamed ougrni","Kenza Abbadi","Marouan Bajbouji","Hamza Sahraoui","Nouhaila Essalih","Nada Bennis","Aziz Dhraief","Anis Boujmil"]};function eB(e){let{onLogin:t}=e,[a,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),m=async e=>{e.preventDefault(),o(""),u(!0);try{"admin"===a&&"Thinkdiffrent@123369"===n?t():o("Invalid username or password")}catch(e){o("An error occurred during login"),console.error("Login error:",e)}finally{u(!1)}};return(0,s.jsxs)(f,{className:"w-[350px] mx-auto mt-8","data-sentry-element":"Card","data-sentry-component":"LoginForm","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(x,{"data-sentry-element":"CardHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(y,{className:"text-2xl font-bold text-center","data-sentry-element":"CardTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Admin Login"})}),(0,s.jsx)(g,{"data-sentry-element":"CardContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{htmlFor:"username","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Username"}),(0,s.jsx)(M,{id:"username",type:"text",value:a,onChange:e=>l(e.target.value),disabled:c,required:!0,"data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{htmlFor:"password","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Password"}),(0,s.jsx)(M,{id:"password",type:"password",value:n,onChange:e=>i(e.target.value),disabled:c,required:!0,"data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),d&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:d}),(0,s.jsx)(h,{type:"submit",className:"w-full",disabled:c,"data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:c?(0,s.jsx)(s.Fragment,{children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.A,{className:"mr-2 h-4 w-4"})," Login"]})})]})})]})}function eO(e){let{shiftTables:t,setShiftTables:a,publishedTables:l,setPublishedTables:n,updateTablesAndSync:i,activeCountries:d,setActiveCountries:o}=e,[c,m]=(0,r.useState)("Morning"),[b,j]=(0,r.useState)(1),[v,w]=(0,r.useState)("1"),[N,S]=(0,r.useState)([]),[k,C]=(0,r.useState)(""),[T,E]=(0,r.useState)(eH),[D,z]=(0,r.useState)(""),[L,O]=(0,r.useState)("Egypt"),[V,Q]=(0,r.useState)(new Date().toISOString().split("T")[0]),[X,el]=(0,r.useState)(""),[en,eo]=(0,r.useState)(!1),[ec,ey]=(0,r.useState)(null),[eb,ej]=(0,r.useState)({}),ev=async e=>{try{t.find(t=>t.id===e)&&(await eD(t),ej(t=>({...t,[e]:!0})),eg.Ay.success("Table saved successfully"))}catch(e){console.error("Error saving table:",e),eg.Ay.error("Failed to save table")}},ew=(0,r.useCallback)(e=>{let t=parseFloat(e.target.value);if(isNaN(t))return;if(t<1){C("Minimum interval is 1 hour");return}if(t>8){C("Maximum interval is 8 hours");return}j(t),w(e.target.value);let a=eN(t,c);S(a),a.length>8?C("Warning: More than 8 time slots"):C("")},[c]),eN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Morning",a=[],{start:s,end:r}={Morning:{start:8,end:16},Afternoon:{start:10,end:18},Day:{start:16,end:24},Evening:{start:18,end:26},Night:{start:0,end:8}}[t],l=s;for(;l<r;){let t=Math.min(l+e,r),s=Math.floor(l)%24,n=Math.round(l%1*60),i=Math.floor(t)%24,d=Math.round(t%1*60),o="".concat(s.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")),c="".concat(i.toString().padStart(2,"0"),":").concat(d.toString().padStart(2,"0"));a.push("".concat(o,"-").concat(c)),l=t}return a},eM=e=>{m(e),S(eN(b,e))};(0,r.useEffect)(()=>{S(eN(b,c))},[c,b]),(0,r.useEffect)(()=>{(async()=>{try{let e=await eE();Object.keys(e).length>0&&E(e)}catch(e){console.error("Error loading agents:",e),eg.Ay.error("Failed to load agents")}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{await eT(T)}catch(e){console.error("Error saving agents:",e)}})()},[T]);let eS=e=>{i(t.map(t=>{if(t.id===e){let e={name:"",tasks:Array(t.timeSlots.length).fill(null)};return{...t,agents:[...t.agents,e]}}return t}))},ek=(e,a)=>{i(t.map(t=>{if(t.id===e){let e=[...t.agents];return e.splice(a,1),{...t,agents:e}}return t})),eg.Ay.success("Agent removed successfully")},eA=async(e,s,r)=>{try{let l=t.map(t=>{if(t.id===e){if(!eV(t.country).includes(r))throw Error("Agent ".concat(r," is not available for ").concat(t.country));let e=[...t.agents];return e[s]={name:r,tasks:Array(t.timeSlots.length).fill(null)},{...t,agents:e}}return t});a(l),await eD(l),eg.Ay.success("Agent updated successfully")}catch(e){console.error("Error updating agent:",e),eg.Ay.error("Failed to update agent")}},eC=async(e,a,s,r)=>{try{let l=t.map(t=>{if(t.id===e){let e=[...t.agents];return e[a].tasks||(e[a].tasks=[]),e[a].tasks[s]={type:r},{...t,agents:e}}return t});await i(l)}catch(e){console.error("Error updating agent task:",e),eg.Ay.error("Failed to update task")}},eI=async e=>{let a=t.find(t=>t.id===e);if(!a){eg.Ay.error("Table not found");return}let s=t.map(t=>({...t,publishedTo:t.id===e?a.country:t.publishedTo}));await i(s),eg.Ay.success("Table published to ".concat(a.country))},eF=async e=>{let a=t.map(t=>({...t,publishedTo:t.id===e?null:t.publishedTo}));await i(a)},eB=async()=>{if(D.trim())try{let e={...T,[L]:[...T[L]||[],D.trim()]};await eT(e),E(e),z(""),eg.Ay.success("Agent added successfully")}catch(e){console.error("Error adding agent:",e),eg.Ay.error("Failed to add agent. Please try again.")}},eO=t.filter(e=>!e.isArchived).reduce((e,t)=>(e[t.date]||(e[t.date]=[]),e[t.date].push(t),e),{}),eP=e=>{if(d[e])return;let t={Egypt:"Egypt"===e,Morocco:"Morocco"===e};o(t),localStorage.setItem("activeCountries",JSON.stringify(t))},eV=e=>T[e]||eH[e]||[];(0,r.useEffect)(()=>{let e=localStorage.getItem("activeCountries");e&&o(JSON.parse(e));let t=localStorage.getItem("agents");t&&E(JSON.parse(t))},[]),(0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("tempShiftTables");if(e)try{let t=JSON.parse(e);Array.isArray(t)&&a(t)}catch(e){console.error("Error loading temporary changes:",e)}})()},[a]),(0,r.useEffect)(()=>{localStorage.setItem("activeCountries",JSON.stringify(d))},[d,o]);let eJ=async()=>{try{let e=d.Egypt?"Egypt":"Morocco",a={id:crypto.randomUUID(),date:V,shiftType:c,country:e,timeSlots:eN(b,c),agents:[],isArchived:!1,isDeleted:!1,senior:X,publishedTo:null,manuallyUnarchived:!1,shifts:{Morning:[],Day:[],Afternoon:[],Evening:[],Night:[]}},s=[...t,a];await i(s),eg.Ay.success("New shift table created successfully")}catch(e){console.error("Error creating new shift table:",e),eg.Ay.error("Failed to create new shift table")}},eU=async()=>{if(ec){if("admin@"!==ec.password){eg.Ay.error("Incorrect password");return}try{let e=t.map(e=>e.id===ec.tableId?{...e,..."delete"===ec.type?{isDeleted:!0}:{isArchived:!0}}:e);await i(e),eg.Ay.success("Table ".concat("delete"===ec.type?"deleted":"archived"," successfully"))}catch(e){eg.Ay.error("An error occurred. Please try again.")}eo(!1),ey(null)}},e_=(e,t)=>{ey({type:e,tableId:t}),eo(!0)};return(0,s.jsxs)("div",{className:"container mx-auto p-4 space-y-8","data-sentry-component":"AdminView","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(f,{"data-sentry-element":"Card","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(x,{"data-sentry-element":"CardHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(y,{"data-sentry-element":"CardTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Active Country"}),(0,s.jsx)(p,{"data-sentry-element":"CardDescription","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Select which country's schedule to manage"})]}),(0,s.jsx)(g,{"data-sentry-element":"CardContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(P,{id:"egypt-switch",checked:d.Egypt,onCheckedChange:()=>eP("Egypt"),"data-sentry-element":"Switch","data-sentry-source-file":"ModernScheduleMaker.tsx"}),(0,s.jsx)(A,{htmlFor:"egypt-switch","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Egypt"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(P,{id:"morocco-switch",checked:d.Morocco,onCheckedChange:()=>eP("Morocco"),"data-sentry-element":"Switch","data-sentry-source-file":"ModernScheduleMaker.tsx"}),(0,s.jsx)(A,{htmlFor:"morocco-switch","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Morocco"})]})]})})]}),(0,s.jsxs)(ei,{"data-sentry-element":"Dialog","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(ed,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(h,{variant:"outline","data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Add New Agent"})}),(0,s.jsxs)(eu,{"data-sentry-element":"DialogContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(em,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(ef,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Add New Agent"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{htmlFor:"new-agent-name","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Agent Name"}),(0,s.jsx)(M,{id:"new-agent-name",value:D,onChange:e=>z(e.target.value),placeholder:"Enter agent name","data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{htmlFor:"new-agent-country","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Country"}),(0,s.jsxs)(I,{value:L,onValueChange:e=>O(e),"data-sentry-element":"Select","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(F,{"data-sentry-element":"SelectTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(R,{placeholder:"Select country","data-sentry-element":"SelectValue","data-sentry-source-file":"ModernScheduleMaker.tsx"})}),(0,s.jsxs)(H,{"data-sentry-element":"SelectContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(B,{value:"Egypt","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Egypt"}),(0,s.jsx)(B,{value:"Morocco","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Morocco"})]})]})]}),(0,s.jsx)(h,{onClick:eB,"data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Add Agent"})]})]})]}),Object.entries(eO).map(e=>{let[t,a]=e;return(0,s.jsxs)(f,{className:"overflow-hidden",children:[(0,s.jsx)(x,{children:(0,s.jsx)(y,{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})}),(0,s.jsx)(g,{className:"space-y-4",children:a.map(e=>(0,s.jsxs)(f,{className:u("overflow-hidden bg-gradient-to-br",eR[e.shiftType].theme),children:[(0,s.jsxs)(x,{className:"bg-white bg-opacity-30 backdrop-blur-sm",children:[(0,s.jsxs)(y,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:[e.shiftType," Shift"]}),(0,s.jsxs)(ep,{variant:"outline",className:"bg-white/50 backdrop-blur-sm",children:[(0,s.jsx)(U.A,{className:"mr-1 h-3 w-3"}),e.country]}),e.publishedTo&&(0,s.jsx)(ep,{variant:"default",className:"bg-green-500",children:"Published"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.publishedTo?(0,s.jsx)(h,{variant:"outline",size:"sm",onClick:()=>eF(e.id),children:"Unpublish"}):(0,s.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>eI(e.id),children:[(0,s.jsx)(U.A,{className:"mr-2 h-4 w-4"})," Publish"]}),(0,s.jsx)(h,{variant:"outline",size:"sm",onClick:()=>eb[e.id]?null:ev(e.id),disabled:eb[e.id],children:eb[e.id]?(0,s.jsx)(_.A,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(G.A,{className:"h-4 w-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>e_("delete",e.id),"aria-label":"Remove shift table",children:(0,s.jsx)(W.A,{className:"h-4 w-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>e_("archive",e.id),className:"hover:bg-purple-100",children:(0,s.jsx)(Y.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.senior})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:eR[e.shiftType].timeRange})]})]}),(0,s.jsxs)(g,{className:"p-0",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)($,{children:[(0,s.jsx)(ee,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{className:"w-[150px] bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-20",children:"Agent's Name"}),e.timeSlots.map((e,t)=>(0,s.jsx)(es,{className:"text-center bg-white bg-opacity-30 backdrop-blur-sm",children:e},t))]})}),(0,s.jsx)(et,{children:e.agents.map((t,a)=>{let r=t.tasks.some(e=>(null==e?void 0:e.type)==="Sick");return(0,s.jsxs)(ea,{className:u(r&&"bg-gray-100"),children:[(0,s.jsx)(er,{className:u("bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-10",t.highlight&&"bg-orange-200 bg-opacity-60"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(I,{value:t.name,onValueChange:t=>eA(e.id,a,t),children:[(0,s.jsx)(F,{className:"w-[180px]",children:(0,s.jsx)(R,{placeholder:"Select agent"})}),(0,s.jsx)(H,{children:eV(e.country).map(e=>(0,s.jsx)(B,{value:e,children:e},e))})]}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>ek(e.id,a),"aria-label":"Remove agent",children:(0,s.jsx)(W.A,{className:"h-4 w-4"})})]})}),e.timeSlots.map((r,l)=>{var n;return(0,s.jsx)(er,{className:"p-1",children:(0,s.jsx)("div",{className:"h-full",children:(0,s.jsxs)(I,{value:(null===(n=t.tasks[l])||void 0===n?void 0:n.type)||"",onValueChange:t=>eC(e.id,a,l,t),children:[(0,s.jsx)(F,{className:u("w-full h-full border-0 focus:ring-0",t.tasks[l]?"bg-gradient-to-r ".concat(eL[t.tasks[l].type]):"bg-white"),children:(0,s.jsx)(R,{placeholder:"Select task"})}),(0,s.jsx)(H,{children:ez[e.country].map(e=>(0,s.jsx)(B,{value:e,children:e},e))})]})})},l)})]},a)})})]})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)(h,{onClick:()=>eS(e.id),variant:"outline",className:"w-full",children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Add Agent"]})})]})]},e.id))})]},t)}),(0,s.jsxs)(ei,{"data-sentry-element":"Dialog","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(ed,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)(h,{className:"mt-4 w-full","data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4","data-sentry-element":"Plus","data-sentry-source-file":"ModernScheduleMaker.tsx"})," Create New Shift Table"]})}),(0,s.jsxs)(eu,{"data-sentry-element":"DialogContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(em,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(ef,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Create New Shift Table"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ex,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Fill in the details for your new shift table."}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(ep,{variant:"outline","data-sentry-element":"Badge","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(U.A,{className:"mr-1 h-3 w-3","data-sentry-element":"Globe","data-sentry-source-file":"ModernScheduleMaker.tsx"}),"Creating for: ",d.Egypt?"Egypt":"Morocco"]})})]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(A,{htmlFor:"shiftType","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Shift Type"}),(0,s.jsxs)(I,{value:c,onValueChange:e=>eM(e),"data-sentry-element":"Select","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(F,{"data-sentry-element":"SelectTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(R,{placeholder:"Select shift type","data-sentry-element":"SelectValue","data-sentry-source-file":"ModernScheduleMaker.tsx"})}),(0,s.jsx)(H,{position:"popper","data-sentry-element":"SelectContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:Object.keys(eR).map(e=>(0,s.jsx)(B,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(A,{htmlFor:"date","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Date"}),(0,s.jsx)(M,{id:"date",type:"date",value:V,onChange:e=>Q(e.target.value),"data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(A,{htmlFor:"seniorName","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Senior Name"}),(0,s.jsx)(M,{id:"seniorName",type:"text",value:X,onChange:e=>el(e.target.value),placeholder:"Enter senior name","data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(A,{htmlFor:"splitInterval","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Split Interval (hours)"}),(0,s.jsx)(M,{type:"number",step:"1",min:"1",max:"8",value:v,onChange:ew,className:u("w-20",k?"border-red-500 focus:ring-red-500":""),"data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"}),(0,s.jsx)(A,{className:"text-sm text-muted-foreground","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Hour intervals"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{className:"text-sm font-medium","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Preview Time Slots:"}),(0,s.jsx)("div",{className:"bg-muted/50 p-3 rounded-md",children:N.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map((e,t)=>(0,s.jsxs)(ep,{variant:"secondary",className:"flex items-center gap-1",children:[(0,s.jsx)(K.A,{className:"h-3 w-3"}),e]},t))}):(0,s.jsx)("div",{className:"text-sm text-muted-foreground text-center py-2",children:"Enter a valid interval to see time slots"})}),k&&(0,s.jsxs)("div",{className:"text-sm text-yellow-600 dark:text-yellow-500 flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),k]})]})]}),(0,s.jsx)(h,{onClick:eJ,"data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Create Shift Table"})]})]}),(0,s.jsx)(ei,{open:en,onOpenChange:eo,"data-sentry-element":"Dialog","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)(eu,{"data-sentry-element":"DialogContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(em,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(ef,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(null==ec?void 0:ec.type)==="delete"?"Confirm Deletion":"Confirm Archive"}),(0,s.jsx)(ex,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(null==ec?void 0:ec.type)==="delete"?"Are you sure you want to delete this shift table? This action requires password confirmation.":"Are you sure you want to archive this shift table? This action requires password confirmation."})]}),(0,s.jsx)("div",{className:"space-y-4 py-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{htmlFor:"password","data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Enter Password"}),(0,s.jsx)(M,{id:"password",type:"password",placeholder:"Enter admin password",onChange:e=>ey(t=>t?{...t,password:e.target.value}:null),"data-sentry-element":"Input","data-sentry-source-file":"ModernScheduleMaker.tsx"})]})}),(0,s.jsxs)(eh,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(h,{variant:"outline",onClick:()=>eo(!1),"data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Cancel"}),(0,s.jsxs)(h,{variant:(null==ec?void 0:ec.type)==="delete"?"destructive":"default",onClick:eU,"data-sentry-element":"Button","data-sentry-source-file":"ModernScheduleMaker.tsx",children:["Confirm ",(null==ec?void 0:ec.type)==="delete"?"Delete":"Archive"]})]})]})})]})}function eP(e){let{shiftTables:t,country:a}=e,r=t.filter(e=>e.publishedTo===a&&!e.isArchived).sort((e,t)=>{let a=new Date(e.date).getTime()-new Date(t.date).getTime();return 0!==a?a:eF[e.shiftType]-eF[t.shiftType]});return(0,s.jsxs)("div",{className:"container mx-auto p-4 space-y-8","data-sentry-component":"PublishedView","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[r.map(e=>(0,s.jsxs)(f,{className:u("overflow-hidden bg-gradient-to-br",eR[e.shiftType].theme),children:[(0,s.jsxs)(x,{className:"bg-white bg-opacity-30 backdrop-blur-sm",children:[(0,s.jsx)(y,{children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{children:[e.shiftType," Shift"]})})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.date})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.senior})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:eR[e.shiftType].timeRange})]})]}),(0,s.jsx)(g,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)($,{children:[(0,s.jsx)(ee,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{children:"Agent's Name"}),e.timeSlots.map((e,t)=>(0,s.jsx)(es,{className:"text-center bg-white bg-opacity-30 backdrop-blur-sm",children:e},t))]})}),(0,s.jsx)(et,{children:e.agents.map((e,t)=>(0,s.jsxs)(ea,{children:[(0,s.jsx)(er,{children:e.name}),e.tasks.map((e,t)=>(0,s.jsx)(er,{className:"p-1",children:(0,s.jsx)("div",{className:u("w-full h-full p-2 rounded",e?"bg-gradient-to-r ".concat(eL[e.type]):"bg-white"),children:(null==e?void 0:e.type)||"-"})},t))]},t))})]})})})]},e.id)),0===r.length&&(0,s.jsxs)("div",{className:"text-center text-gray-500",children:["No published schedules for ",a]})]})}function eV(e){let{shiftTables:t,setShiftTables:a,updateTablesAndSync:i}=e,[d,o]=(0,r.useState)(null),c=[...new Set(t.filter(e=>e.isArchived).map(e=>e.date))],m=e=>{o(d===e?null:e)},p=async e=>{if(window.confirm("Are you sure you want to unarchive this shift table?")){if("admin@"!==window.prompt("Please enter the password to unarchive:")){eg.Ay.error("Incorrect password. Action cancelled.");return}try{let a=t.map(t=>t.id===e?{...t,isArchived:!1,manuallyUnarchived:!0}:t);await i(a),eg.Ay.success("Table unarchived successfully")}catch(e){console.error("Error unarchiving table:",e),eg.Ay.error("Failed to unarchive table")}}},b=async e=>{if(window.confirm("Are you sure you want to delete all archived tables for this date?")){if("admin@"!==window.prompt("Please enter the password to delete:")){eg.Ay.error("Incorrect password. Action cancelled.");return}try{let s=t.filter(t=>t.date!==e||!t.isArchived);await eD(s),a(s),eg.Ay.success("Archived tables deleted successfully")}catch(e){console.error("Error deleting archived tables:",e),eg.Ay.error("Failed to delete archived tables")}}},j=(e,a)=>t.filter(t=>t.isArchived&&t.date===e&&(t.publishedTo===a||null===t.publishedTo));return(0,s.jsxs)("div",{className:"container mx-auto p-4 space-y-8","data-sentry-component":"ArchiveView","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Archived Schedules"}),c.map(e=>(0,s.jsxs)(f,{className:"overflow-hidden",children:[(0,s.jsx)(x,{className:"cursor-pointer bg-gray-100 hover:bg-gray-200 transition-colors",children:(0,s.jsxs)(y,{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",onClick:()=>m(e),children:[(0,s.jsx)("span",{children:e}),d===e?(0,s.jsx)(E.A,{className:"h-4 w-4"}):(0,s.jsx)(T.A,{className:"h-4 w-4"})]}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),b(e)},className:"hover:bg-red-100 hover:text-red-600 transition-colors",children:(0,s.jsx)(W.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(l.N,{children:d===e&&(0,s.jsx)(n.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:(0,s.jsxs)(g,{className:"pt-4",children:[j(e,"Egypt").length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(Q.A,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Egypt"})]}),(0,s.jsx)("div",{className:"space-y-4",children:j(e,"Egypt").sort((e,t)=>{var a,s;return(null!==(a=eF[e.shiftType])&&void 0!==a?a:0)-(null!==(s=eF[t.shiftType])&&void 0!==s?s:0)}).map(e=>(0,s.jsxs)(f,{className:u("overflow-hidden bg-gradient-to-br",eR[e.shiftType].theme),children:[(0,s.jsxs)(x,{className:"bg-white bg-opacity-30 backdrop-blur-sm",children:[(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("span",{children:[e.shiftType," Shift"]}),(0,s.jsxs)(h,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),p(e.id)},className:"hover:bg-green-100 hover:text-green-600 transition-colors",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 mr-1"}),"Unarchive"]})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.senior})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:eR[e.shiftType].timeRange})]})]}),(0,s.jsx)(g,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)($,{children:[(0,s.jsx)(ee,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{className:"w-[150px] bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-20",children:"Agent's Name"}),e.timeSlots.map((e,t)=>(0,s.jsx)(es,{className:"text-center bg-white bg-opacity-30 backdrop-blur-sm",children:e},t))]})}),(0,s.jsx)(et,{children:e.agents.map((e,t)=>{let a=e.tasks.some(e=>(null==e?void 0:e.type)==="Sick");return(0,s.jsxs)(ea,{className:u(a&&"bg-gray-100"),children:[(0,s.jsx)(er,{className:u("bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-10",e.highlight&&"bg-orange-200 bg-opacity-60"),children:(0,s.jsx)("span",{children:e.name})}),e.tasks.map((e,t)=>(0,s.jsx)(er,{className:"p-1",children:(0,s.jsx)("div",{className:u("w-full h-full p-2 rounded",e?"bg-gradient-to-r ".concat(eL[e.type]):"bg-white"),children:(null==e?void 0:e.type)||"-"})},t))]},t)})})]})})})]},e.id))})]}),j(e,"Morocco").length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(Q.A,{className:"h-5 w-5"}),(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Morocco"})]}),(0,s.jsx)("div",{className:"space-y-4",children:j(e,"Morocco").sort((e,t)=>{var a,s;return(null!==(a=eF[e.shiftType])&&void 0!==a?a:0)-(null!==(s=eF[t.shiftType])&&void 0!==s?s:0)}).map(e=>(0,s.jsxs)(f,{className:u("overflow-hidden bg-gradient-to-br",eR[e.shiftType].theme),children:[(0,s.jsxs)(x,{className:"bg-white bg-opacity-30 backdrop-blur-sm",children:[(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("span",{children:[e.shiftType," Shift"]}),(0,s.jsxs)(h,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),p(e.id)},className:"hover:bg-green-100 hover:text-green-600 transition-colors",children:[(0,s.jsx)(X.A,{className:"h-4 w-4 mr-1"}),"Unarchive"]})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.senior})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:eR[e.shiftType].timeRange})]})]}),(0,s.jsx)(g,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)($,{children:[(0,s.jsx)(ee,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{className:"w-[150px] bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-20",children:"Agent's Name"}),e.timeSlots.map((e,t)=>(0,s.jsx)(es,{className:"text-center bg-white bg-opacity-30 backdrop-blur-sm",children:e},t))]})}),(0,s.jsx)(et,{children:e.agents.map((e,t)=>{let a=e.tasks.some(e=>(null==e?void 0:e.type)==="Sick");return(0,s.jsxs)(ea,{className:u(a&&"bg-gray-100"),children:[(0,s.jsx)(er,{className:u("bg-white bg-opacity-30 backdrop-blur-sm sticky left-0 z-10",e.highlight&&"bg-orange-200 bg-opacity-60"),children:(0,s.jsx)("span",{children:e.name})}),e.tasks.map((e,t)=>(0,s.jsx)(er,{className:"p-1",children:(0,s.jsx)("div",{className:u("w-full h-full p-2 rounded",e?"bg-gradient-to-r ".concat(eL[e.type]):"bg-white"),children:(null==e?void 0:e.type)||"-"})},t))]},t)})})]})})})]},e.id))})]})]})})})]},e))]})}function eJ(e){let{shiftTables:t,analyticsFilters:a,setAnalyticsFilters:r}=e,l=(e,t)=>{r({...a,[e]:t})},n=e=>{let[t,a]=e.split(":").map(Number);return 60*t+a},i=(e,t)=>{let a=n(e),s=n(t);return s<a&&(s+=1440),(s-a)/60},d=Array.from(new Set(ez[a.country]));return(0,s.jsx)("div",{className:"container mx-auto p-4 space-y-8","data-sentry-component":"AnalyticsView","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)(f,{"data-sentry-element":"Card","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(x,{"data-sentry-element":"CardHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(y,{"data-sentry-element":"CardTitle","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Analytics"}),(0,s.jsx)(p,{"data-sentry-element":"CardDescription","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"View work hours by agent and task type"})]}),(0,s.jsxs)(g,{"data-sentry-element":"CardContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{"data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Country"}),(0,s.jsxs)(I,{value:a.country,onValueChange:e=>l("country",e),"data-sentry-element":"Select","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(F,{"data-sentry-element":"SelectTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(R,{"data-sentry-element":"SelectValue","data-sentry-source-file":"ModernScheduleMaker.tsx"})}),(0,s.jsxs)(H,{"data-sentry-element":"SelectContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(B,{value:"Egypt","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Egypt"}),(0,s.jsx)(B,{value:"Morocco","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Morocco"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{"data-sentry-element":"Label","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Filter Type"}),(0,s.jsxs)(I,{value:a.view,onValueChange:e=>l("view",e),"data-sentry-element":"Select","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(F,{"data-sentry-element":"SelectTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(R,{"data-sentry-element":"SelectValue","data-sentry-source-file":"ModernScheduleMaker.tsx"})}),(0,s.jsxs)(H,{"data-sentry-element":"SelectContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(B,{value:"all-time","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"All Time"}),(0,s.jsx)(B,{value:"date-range","data-sentry-element":"SelectItem","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Date Range"})]})]})]})]}),"date-range"===a.view&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{children:"Start Date"}),(0,s.jsx)(M,{type:"date",value:a.startDate||"",onChange:e=>l("startDate",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{children:"End Date"}),(0,s.jsx)(M,{type:"date",value:a.endDate||"",onChange:e=>l("endDate",e.target.value)})]})]})]}),(0,s.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,s.jsxs)($,{"data-sentry-element":"Table","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(ee,{"data-sentry-element":"TableHeader","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsxs)(ea,{"data-sentry-element":"TableRow","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(es,{className:"bg-white sticky left-0","data-sentry-element":"TableHead","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Agent Name"}),d.map(e=>(0,s.jsx)(es,{className:"text-center",children:e},e)),(0,s.jsx)(es,{className:"text-center","data-sentry-element":"TableHead","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Total Hours"})]})}),(0,s.jsx)(et,{"data-sentry-element":"TableBody","data-sentry-source-file":"ModernScheduleMaker.tsx",children:Object.values(((e,t)=>{console.log("Starting analytics calculation for ".concat(t));let s=e.filter(e=>{let s=e.country===t&&e.publishedTo===t;if(!a.startDate||!a.endDate)return s;let r=new Date(e.date),l=new Date(a.startDate),n=new Date(a.endDate);return s&&r>=l&&r<=n});console.log("Found ".concat(s.length," valid tables for ").concat(t),{tables:s.map(e=>{var t;return{date:e.date,agentCount:(null===(t=e.agents)||void 0===t?void 0:t.length)||0}})});let r={};return s.forEach(e=>{e.agents&&(console.log("Processing table: ".concat(e.date,", Shift: ").concat(e.shiftType)),e.agents.forEach(a=>{a.name&&a.tasks&&(r[a.name]||(r[a.name]={name:a.name,tasks:ez[t].reduce((e,t)=>(e[t]=0,e),{}),breakHours:0}),a.tasks.forEach((t,s)=>{if(!t||!t.type||!e.timeSlots||!e.timeSlots[s])return;let l=e.timeSlots[s],[n,d]=l.split("-").map(e=>e.trim());if(n&&d){let e=i(n,d);e>0&&(console.log("Adding ".concat(e," hours for ").concat(a.name," - ").concat(t.type," (").concat(l,")")),r[a.name].tasks[t.type]+=e,("Break"===t.type||"Sick"===t.type)&&(r[a.name].breakHours+=e))}}))}))}),console.log("Final analytics:",r),r})(t,a.country)).map(e=>{let t=d.reduce((t,a)=>t+e.tasks[a],0);return(0,s.jsxs)(ea,{children:[(0,s.jsx)(er,{className:"bg-white sticky left-0 font-medium",children:e.name}),d.map(t=>(0,s.jsx)(er,{className:"text-center",children:Number(e.tasks[t]).toFixed(1)},t)),(0,s.jsx)(er,{className:"text-center",children:Number(t).toFixed(1)})]},e.name)})})]})})]})]})})}function eU(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)("admin");(0,r.useEffect)(()=>{let e=localStorage.getItem("activeTab");e&&o(e)},[]),(0,r.useEffect)(()=>{localStorage.setItem("activeTab",d)},[d]);let[c,u]=(0,r.useState)(!0),[m,f]=(0,r.useState)(!1),[x,y]=(0,r.useState)("Welcome to Schedule Maker"),[p,g]=function(){let[e,t]=(0,r.useState)(()=>{let e={Egypt:!0,Morocco:!1};try{let t=localStorage.getItem("activeCountries");return t?JSON.parse(t):e}catch(t){return e}});return(0,r.useEffect)(()=>{localStorage.setItem("activeCountries",JSON.stringify(e))},[e]),[e,t]}(),[b,M]=(0,r.useState)(0),[S,k]=(0,r.useState)(0);(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=Date.now();a-S>5e3&&("success"===t?eg.Ay.success(e):eg.Ay.error(e),k(a))},[S]);let[A,C]=(0,r.useState)("synced"),[T,E]=(0,r.useState)(null),D=async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{C("syncing"),t(e);let s=e.filter(e=>!e.isArchived&&!e.isDeleted&&("Egypt"===e.publishedTo||"Morocco"===e.publishedTo));l(s),await eD(e),C("synced"),E(new Date),a&&eg.Ay.success("Changes saved successfully")}catch(e){throw console.error("Error updating tables:",e),C("error"),eg.Ay.error("Failed to save changes"),e}},I=()=>{switch(A){case"synced":return"text-green-500";case"syncing":return"text-yellow-500";case"error":return"text-red-500";default:return"text-gray-500"}},R=()=>{switch(A){case"synced":return(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"syncing":return(0,s.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});case"error":return(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},F=()=>{switch(A){case"synced":return"Synced".concat(T?" at ".concat(T.toLocaleTimeString()):"");case"syncing":return"Syncing...";case"error":return"Sync failed";default:return"Unknown status"}},z=(0,r.useCallback)(async()=>{u(!0);try{let e=await eI(),a=L(e);t(a);let s=a.filter(e=>!e.isArchived&&!e.isDeleted&&("Egypt"===e.publishedTo||"Morocco"===e.publishedTo));l(s)}catch(e){console.error("Error loading tables:",e),eg.Ay.error("Failed to load tables")}finally{u(!1)}},[t,l,eg.Ay]),L=e=>e.map(e=>{if("Morocco"!==e.country)return e;let t=e.agents.map(e=>({...e,tasks:e.tasks.map(e=>{if(!e)return null;let t=e.type;return{...e,type:t}})}));return{...e,agents:t}});(0,r.useEffect)(()=>{z()},[z]);let H=e=>a.filter(t=>t.publishedTo===e);(0,r.useEffect)(()=>{localStorage.setItem("activeCountries",JSON.stringify(p))},[p,g]),(0,r.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("sessionExpiry");if(e){let t=parseInt(e);if(Date.now()<t){i(!0);let e=Date.now()+864e5;localStorage.setItem("sessionExpiry",e.toString())}else i(!1),localStorage.removeItem("sessionExpiry")}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]);let[B,O]=function(){let[e,t]=(0,r.useState)(()=>{let e={startDate:null,endDate:null,country:"Egypt",view:"all-time"};try{let t=localStorage.getItem("analyticsFilters");return t?JSON.parse(t):e}catch(t){return e}});return(0,r.useEffect)(()=>{localStorage.setItem("analyticsFilters",JSON.stringify(e))},[e]),[e,t]}();return(0,r.useEffect)(()=>{localStorage.setItem("analyticsFilters",JSON.stringify(B))},[B]),(0,r.useEffect)(()=>{localStorage.setItem("activeTab",d)},[d]),(0,r.useEffect)(()=>{localStorage.setItem("activeCountries",JSON.stringify(p))},[p]),(0,r.useEffect)(()=>{localStorage.setItem("analyticsFilters",JSON.stringify(B))},[B]),(0,s.jsxs)("div",{className:"relative min-h-screen","data-sentry-component":"ModernScheduleMaker","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-white/50 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),(0,s.jsx)("p",{className:"text-lg font-medium text-primary animate-pulse",children:"Loading your schedules..."})]})}),m&&(0,s.jsxs)("div",{className:"fixed top-4 right-4 bg-primary/10 backdrop-blur-sm rounded-lg px-4 py-2 flex items-center gap-2 z-50",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),(0,s.jsx)("span",{className:"text-sm font-medium text-primary",children:"Saving changes..."})]}),n&&(0,s.jsxs)(h,{variant:"ghost",size:"sm",onClick:()=>{localStorage.removeItem("sessionExpiry"),i(!1)},className:"absolute top-4 right-4 flex items-center gap-2 hover:bg-red-100 hover:text-red-600 transition-colors",children:[(0,s.jsx)(V.A,{className:"h-4 w-4"}),"Logout"]}),(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent animate-gradient",children:[function(){let e=new Date().getHours();return e>=5&&e<12?"Good Morning":e>=12&&e<17?"Good Afternoon":e>=17&&e<22?"Good Evening":"Good Night"}()," \uD83D\uDC4B"]}),(0,s.jsx)("p",{className:"mt-2 text-lg text-gray-600 animate-fade-in",children:x})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Schedule Maker"}),(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm","data-sentry-component":"SyncStatusIndicator","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)("span",{className:"flex items-center ".concat(I()),children:R()}),(0,s.jsx)("span",{className:"".concat(I()," hidden sm:inline"),children:F()})]}),{"data-sentry-element":"SyncStatusIndicator","data-sentry-source-file":"ModernScheduleMaker.tsx"})]}),(0,s.jsxs)(j,{value:d,className:"space-y-4",onValueChange:e=>{o(e),localStorage.setItem("activeTab",e),z()},"data-sentry-element":"Tabs","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsxs)(v,{className:"grid w-full grid-cols-5","data-sentry-element":"TabsList","data-sentry-source-file":"ModernScheduleMaker.tsx",children:[(0,s.jsx)(w,{value:"admin","data-sentry-element":"TabsTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n?"Admin":(0,s.jsx)(V.A,{className:"h-4 w-4"})}),(0,s.jsx)(w,{value:"analytics",disabled:!n,"data-sentry-element":"TabsTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n?"Analytics":(0,s.jsx)(V.A,{className:"h-4 w-4"})}),(0,s.jsx)(w,{value:"archive",disabled:!n,"data-sentry-element":"TabsTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n?"Archive":(0,s.jsx)(V.A,{className:"h-4 w-4"})}),(0,s.jsx)(w,{value:"egypt","data-sentry-element":"TabsTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Egypt"}),(0,s.jsx)(w,{value:"morocco","data-sentry-element":"TabsTrigger","data-sentry-source-file":"ModernScheduleMaker.tsx",children:"Morocco"})]}),(0,s.jsx)(N,{value:"admin","data-sentry-element":"TabsContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n?(0,s.jsx)(eO,{shiftTables:e,setShiftTables:t,publishedTables:a,setPublishedTables:l,updateTablesAndSync:D,activeCountries:p,setActiveCountries:g}):(0,s.jsx)(eB,{onLogin:()=>{let e=Date.now()+864e5;localStorage.setItem("sessionExpiry",e.toString()),i(!0)}})}),(0,s.jsx)(N,{value:"analytics","data-sentry-element":"TabsContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n&&(0,s.jsx)(eJ,{shiftTables:e,analyticsFilters:B,setAnalyticsFilters:O})}),(0,s.jsx)(N,{value:"archive","data-sentry-element":"TabsContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:n&&(0,s.jsx)(eV,{shiftTables:e,setShiftTables:t,updateTablesAndSync:D})}),(0,s.jsx)(N,{value:"egypt","data-sentry-element":"TabsContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(eP,{shiftTables:H("Egypt"),country:"Egypt","data-sentry-element":"PublishedView","data-sentry-source-file":"ModernScheduleMaker.tsx"})}),(0,s.jsx)(N,{value:"morocco","data-sentry-element":"TabsContent","data-sentry-source-file":"ModernScheduleMaker.tsx",children:(0,s.jsx)(eP,{shiftTables:H("Morocco"),country:"Morocco","data-sentry-element":"PublishedView","data-sentry-source-file":"ModernScheduleMaker.tsx"})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,282,511,850,441,774,358],()=>t(3972)),_N_E=e.O()}]);